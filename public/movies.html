<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>San Juan Theater | Admin Add Movie</title>
    <meta name="description" content="Admin Add a New Movie for San Juan Theater" />
    <link rel="stylesheet" href="https://use.typekit.net/vem8cxz.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://kit.fontawesome.com/db6c0dda2a.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <header id="main-header">
      <div class="header">
        <img src="/images/Theater_logo_new_2.svg" class="header-logo" alt="San Juan Theater Logo" />
        <nav class="nav">
          <a href="https://sanjuantheater.onrender.com/" target="home" id="userGreeting"></a>
          <a href="/movies.html" target="Movies" class="active">Add Movies</a>
          <a href="/news.html" target="News">Add News</a>
          <a href="/events.html" target="Events">Add Events</a>
          <a href="/users.html" target="Users">Manage Users</a>
        </nav>
      </div>
    </header>
    <nav></nav>
    <main>
      <h1>San Juan Theater Admin</h1>
      <h2>Manage Movies Collection</h2>
      <h3>Add a Movie</h3>
      <form id="newMovieForm" action="https://sanjuantheater.onrender.com/movies/new" method="POST">
        <label for="title">Movie Title</label>
        <input class="input-newMovie" type="text" id="title" name="title" required /><br /><br />
        <label for="tagLine">Tag Line</label>
        <input class="input-newMovie" type="text" id="tagLine" name="tagLine" /><br /><br />
        <label for="overview">Overview</label>
        <input class="input-newMovie" type="text" id="overview" name="overview" required /><br /><br />
        <label for="year">Year</label>
        <input class="input-newMovie" type="number" id="year" name="year" required placeholder="YYYY" /><br /><br />
        <label for="certification">Rating</label><br />
        <input class="input-newMovie" type="radio" id="certification" name="certification" value="G" />
        <label for="G">G</label><br />
        <input class="input-newMovie" type="radio" id="certification" name="certification" value="PG" />
        <label for="PG">PG</label><br />
        <input class="input-newMovie" type="radio" id="certification" name="certification" value="PG-13" />
        <label for="PG-13">PG-13</label><br />
        <input class="input-newMovie" type="radio" id="certification" name="certification" value="R" />
        <label for="R">R</label><br />
        <input class="input-newMovie" type="radio" id="certification" name="certification" value="NC-17" />
        <label for="NC-17">NC-17</label><br /><br />
        <label for="releaseDate">Release Date</label>
        <input class="input-newMovie" type="date" id="releaseDate" name="releaseDate" pattern="YYYY-MM-DD" /><br /><br />
        <fieldset class="genres-section">
          <legend>Genres: Select all that apply</legend>
          <input type="checkbox" id="genreAction" name="genres" value="Action" />
          <label for="genreAction">Action</label>
          <input type="checkbox" id="genreAdult" name="genres" value="Adult" />
          <label for="genreAdult">Adult</label>
          <input type="checkbox" id="genreAdventure" name="genres" value="Adventure" />
          <label for="genreAdventure">Adventure</label>
          <input type="checkbox" id="genreAnimation" name="genres" value="Animation" />
          <label for="genreAnimation">Animation</label>
          <input type="checkbox" id="genreBiography" name="genres" value="Biography" />
          <label for="genreBiography">Biography</label>
          <input type="checkbox" id="genreComedy" name="genres" value="Comedy" />
          <label for="genreComedy">Comedy</label>
          <input type="checkbox" id="genreCrime" name="genres" value="Crime" />
          <label for="genreCrime">Crime</label>
          <input type="checkbox" id="genreDocumentary" name="genres" value="Documentary" />
          <label for="genreDocumentary">Documentary</label>
          <input type="checkbox" id="genreDrama" name="genres" value="Drama" />
          <label for="genreDrama">Drama</label>
          <input type="checkbox" id="genreFaithAndSpirituality" name="genres" value="Faith and Spirituality" />
          <label for="genreFaithAndSpirituality">Faith and Spirituality</label>
          <input type="checkbox" id="genreFamily" name="genres" value="Family" />
          <label for="genreFamily">Family</label>
          <input type="checkbox" id="genreFantasy" name="genres" value="Fantasy" />
          <label for="genreFantasy">Fantasy</label>
          <input type="checkbox" id="genreFilmNoir" name="genres" value="Film Noir" />
          <label for="genreFilmNoir">Film Noir</label>
          <input type="checkbox" id="genreGameShow" name="genres" value="Game Show" />
          <label for="genreGameShow">Game Show</label>
          <input type="checkbox" id="genreHistory" name="genres" value="History" />
          <label for="genreHistory">History</label>
          <input type="checkbox" id="genreHorror" name="genres" value="Horror" />
          <label for="genreHorror">Horror</label>
          <input type="checkbox" id="genreMusical" name="genres" value="Musical" />
          <label for="genreMusical">Musical</label>
          <input type="checkbox" id="genreMusic" name="genres" value="Music" />
          <label for="genreMusic">Music</label>
          <input type="checkbox" id="genreMystery" name="genres" value="Mystery" />
          <label for="genreMystery">Mystery</label>
          <input type="checkbox" id="genreNews" name="genres" value="News" />
          <label for="genreNews">News</label>
          <input type="checkbox" id="genreRealityTV" name="genres" value="Reality-TV" />
          <label for="genreRealityTV">Reality-TV</label>
          <input type="checkbox" id="genreRomance" name="genres" value="Romance" />
          <label for="genreRomance">Romance</label>
          <input type="checkbox" id="genreSciFi" name="genres" value="Sci-Fi" />
          <label for="genreSciFi">Sci-Fi</label>
          <input type="checkbox" id="genreShort" name="genres" value="Short" />
          <label for="genreShort">Short</label>
          <input type="checkbox" id="genreSport" name="genres" value="Sport" />
          <label for="genreSport">Sport</label>
          <input type="checkbox" id="genreTalkShow" name="genres" value="Talk-Show" />
          <label for="genreTalkShow">Talk-Show</label>
          <input type="checkbox" id="genreThriller" name="genres" value="Thriller" />
          <label for="genreThriller">Thriller</label>
          <input type="checkbox" id="genreWar" name="genres" value="War" />
          <label for="genreWar">War</label>
          <input type="checkbox" id="genreWestern" name="genres" value="Western" />
          <label for="genreWestern">War</label>
        </fieldset>
        <br />
        <label for="runtime">Runtime</label>
        <input class="input-newMovie" type="text" id="runtime" name="runtime" placeholder="2h 13m" /><br /><br />
        <label for="imdbScore">IMDB Score</label>
        <input class="input-newMovie" type="number" id="imdbScore" name="imdbScore" min="1.0" max="10.0" step="0.1" placeholder="7.5" /><br /><br />
        <label for="rottenTomatoes">Rotten Tomatoes Score</label>
        <input class="input-newMovie" type="text" id="rottenTomatoes" name="rottenTomatoes" placeholder="84%" /><br /><br />
        <label for="poster">Poster Image</label>
        <input class="input-newMovie" type="url" id="poster" name="poster" placeholder="url of shareable image" /><br /><br />
        <label for="trailer">Official Trailer</label>
        <input class="input-newMovie" type="url" id="trailer" name="trailer" placeholder="url of official trailer" /><br /><br />
        <label for="isPremier">Movie is a Premier? (check if true)</label>
        <input type="checkbox" id="isPremier" name="isPremier" /><br /><br />
        <label for="startDate">Showtime Start Date</label>
        <input class="input-newMovie" type="date" id="startDate" name="startDate" placeholder="YYYY-MM-DD" /><br /><br />
        <label for="endDate">Showtime End Date</label>
        <input class="input-newMovie" type="date" id="endDate" name="endDate" placeholder="YYYY-MM-DD" /><br /><br />
        <label for="isActive">Display Status Active? (check if active)</label>
        <input type="checkbox" id="isActive" name="isActive" /><br /><br />
        <button type="submit">Create New Movie</button>
      </form>
      <div id="message"></div>
      <div>
        <a href="https://sanjuantheater.onrender.com/"><p>Return Home</p></a>
      </div>
    </main>
    <footer class="obliqua">
      &copy; <span id="currentYear"></span> | 10 South Main St | Blanding Utah |
      <a class="footerLink" href="https://sanjuantheater.onrender.com">San Juan Movie Theater</a><br />
      Last Updated: <span id="updateDate"></span>
    </footer>
    <script src="/script/footerFunction.js"></script>
    <script>
      document.getElementById('newMovieForm').addEventListener('submit', function (event) {
        event.preventDefault();

        const formData = new FormData(this);
        const movieData = {};
        formData.forEach((value, key) => {
          if (value.trim() !== '') {
            if (key === 'genres') {
              if (!movieData[key]) {
                movieData[key] = [];
              }
              movieData[key].push(value);
            } else if (key === 'isPremier' || key === 'isActive') {
              movieData[key] = value === 'false';
            } else {
              movieData[key] = value;
            }
          }
        });

        fetch('https://sanjuantheater.onrender.com/movies/new', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(movieData)
        })
          .then((response) => response.text())
          .then((data) => {
            document.getElementById('message').textContent = data;
          })
          .catch((error) => {
            document.getElementById('message').textContent = 'Error creating new movie';
            console.error('Error:', error);
          });
      });
    </script>
  </body>
</html>
